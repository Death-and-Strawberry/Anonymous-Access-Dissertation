# Anonymous-Access-Dissertation
A project that utilises ZKPs and selective disclosure to create proofs that can be used to login into a (Therapy) service.

This project has two stages:

1. Where you use ZKP to produce a multi-show credential that can be used to login into a service.
2. An emulation of a therapy service that can be logged in using a ZKP credential hosted over Tor

Each part will operate in the respective order and will require some setup.
Each part also has its own set of requirements and the scripts within will help you setup, this readme simply contains an overview of the project, the prerequisites of the project and simple instructions on how to setup the project on windows/linux/macos machines.


# ZKP_Software

Prerequisites:
1. Rust
2. Circom -> Run ZK circuits 
3. Snarkjs -> Proof creation and verification

macOs & Linux:
```bash
# Install Node.js (Recommended: via nvm)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # Load nvm
nvm install node

# Install Rust (needed for Circom)
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
source $HOME/.cargo/env

# Install Circom (Current mainstream version: 2.x)
git clone https://github.com/iden3/circom.git
cd circom
cargo build --release
sudo ln -s $(pwd)/target/release/circom /usr/local/bin/circom
cd ..

# Install SnarkJS
npm install -g snarkjs
```

Windows:

```powershell
# Install Rust (needed for Circom)
iwr https://sh.rustup.rs -useb | iex
# Restart PowerShell (or run: refreshenv) and verify:
rustc --version
cargo --version

# Install Node.js
# Recommended: via nvm-windows â†’ https://github.com/coreybutler/nvm-windows
nvm install latest
nvm use latest
node -v
npm -v

# Install Circom (Current mainstream version: 2.x)
git clone https://github.com/iden3/circom.git
cd circom
cargo build --release
cd ..

# Add circom.exe to PATH (so you can call `circom` from anywhere)
setx PATH "$($env:PATH);$PWD\circom\target\release"

# Verify installation
circom --version

# Install SnarkJS
npm install -g snarkjs

# Verify installation
snarkjs --help
```


## Instructions

1. First ensure you have the prerequisites installed.
2. Next run the setup script which will create and activate your virtual environment, build the the submodule within (ffi-bbs-signatures: https://github.com/mattrglobal/ffi-bbs-signatures.git) and add the dynamic library needed for the project to run. Also it will pip install many dependencies that the project requires (please look at the requirements file within the ZKP_Software folder.)
    in your terminal:
    chmod +x scripts/(filename).sh followed by ./scripts/(filename).sh
    for first setup.sh and then run.sh
3. Follow the prompts on the command line, it will prompt you to enter some details (you may enter whatever you like for the sake of the project), it will produce some outputs in the /out folder you will only really need the input_payload.json produced and make sure you copy or hold onto the secret key produced at the end of it running, these will be needed for the second part of the project.

# Therapy Platform

Prerequisites:

1. Tor and Tor browser

macOs: (assuming your have homebrew, otherwise you can look up to see how to install Tor on your mac).
 ```bash
 brew install tor
 ```
Otherwise simply visit https://www.torproject.org/download/tor/ and download the Tor expert bundle
and then 
```bash
cd ~/Tor
./tor
```

Windows:
First download the Tor expert bundle from https://www.torproject.org/download/tor/
then

```bat
cd C:\Tor
tor.exe
```


Linux:

```bash
sudo apt update
sudo apt install tor
```

To download Tor browser simply go to https://www.torproject.org/download/ and download for your os.

## Instructions

1. Ensure you have the prerequisites installed
2. Run the scripts within the scripts folder in the order 
    setup.sh
    setup_tor.sh
    run.sh
   and they can be done so with the command chmod +x scripts/(filename).sh followed by ./scripts/(filename).sh
3. Open Tor broswer and copy paste the onion adress you see generated by the application after running run.sh and you can navigate the web app from there.

